@inject HttpClient Http
@inject AppService AppService

@if (!string.IsNullOrEmpty(errorMessage))
{
    <p>@errorMessage</p>
}
else if (verses == null)
{
    <div class="text-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
}
else
{
    <div class="card-columns">
        @foreach (var verse in verses)
        {
            <VerseCard Verse="verse" />
        }
    </div>
}

@code {
    private Verse[] verses;
    private string errorMessage;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            verses = (await AppService.GetVerses()).ToArray();
        }
        catch (Exception)
        {
            errorMessage = "An error occurred while loading data...";
        }
    }

}
